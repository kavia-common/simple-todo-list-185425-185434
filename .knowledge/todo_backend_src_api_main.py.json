{"is_source_file": true, "format": "Python", "description": "This is a FastAPI-based backend for a todo list application using SQLite for persistence. It defines data models for tasks, handles database initialization, and provides endpoints for CRUD operations on tasks including health checks, listing, creating, updating, toggling completion, and deleting tasks.", "external_files": ["sqlite3", "os", "contextlib", "datetime", "typing", "fastapi", "fastapi.middleware.cors", "pydantic"], "external_methods": ["os.getenv", "os.path.join", "os.makedirs", "sqlite3.connect", "sqlite3.Row", "datetime.utcnow", "BaseModel", "Field", "FastAPI", "HTTPException", "Path", "CORSMiddleware"], "published": ["app", "health_check", "list_tasks", "create_task", "update_task", "toggle_task", "delete_task", "TaskCreate", "TaskUpdate", "Task"], "classes": [{"name": "TaskCreate", "description": "Payload for creating a new task."}, {"name": "TaskUpdate", "description": "Payload for updating an existing task."}, {"name": "Task", "description": "Task model returned by the API."}], "methods": [{"name": "Task row_to_task(row: sqlite3.Row)", "description": "Converts a sqlite3.Row object into a Task model.", "scope": "", "scopeKind": ""}, {"name": "get_conn()", "description": "Context manager that creates and manages SQLite database connections, setting row_factory for easy dict-like access.", "scope": "", "scopeKind": ""}, {"name": "init_db()", "description": "Initializes the database schema, creating the tasks table if it does not exist.", "scope": "", "scopeKind": ""}, {"name": "health_check()", "description": "API endpoint for health status check, returns a simple 'ok' message.", "scope": "", "scopeKind": ""}, {"name": "List[Task] list_tasks()", "description": "Retrieves all tasks ordered by creation time descending.", "scope": "", "scopeKind": ""}, {"name": "Task create_task(payload: TaskCreate)", "description": "Creates a new task with provided title and optional completion status.", "scope": "", "scopeKind": ""}, {"name": "Task update_task( payload: TaskUpdate, task_id: int = Path(..., description=\"ID of the task to update\"), )", "description": "Updates specified fields of an existing task identified by task_id.", "scope": "", "scopeKind": ""}, {"name": "Task toggle_task( task_id: int = Path(..., description=\"ID of the task to toggle\"), )", "description": "Toggles the completion status of the specified task.", "scope": "", "scopeKind": ""}, {"name": "delete_task( task_id: int = Path(..., description=\"ID of the task to delete\"), )", "description": "Deletes the task with the specified task_id.", "scope": "", "scopeKind": ""}, {"name": "on_startup()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["get_conn()", "conn.execute()", "conn.commit()", "conn.close()", "os.getenv()", "os.path.dirname()", "os.makedirs()", "sqlite3.connect()", "datetime.utcnow().isoformat()", "row_to_task()", "conn.execute()", "conn.execute().fetchone()", "conn.execute().fetchall()"], "search-terms": ["FastAPI", "SQLite", "todo", "tasks", "CRUD", "task model", "openapi", "health", "toggle", "database schema"], "state": 2, "file_id": 2, "knowledge_revision": 10, "git_revision": "3846590f3f9f02c093ab2fcaf57980910a91655f", "revision_history": [{"9": "c18d89670663722c472f23db08bb6a7b98916548"}, {"10": "3846590f3f9f02c093ab2fcaf57980910a91655f"}], "ctags": [{"_type": "tag", "name": "DB_FILE", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185425-185434/todo_backend/src/api/main.py", "pattern": "/^DB_FILE = os.getenv($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "Task", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185425-185434/todo_backend/src/api/main.py", "pattern": "/^class Task(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TaskCreate", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185425-185434/todo_backend/src/api/main.py", "pattern": "/^class TaskCreate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TaskUpdate", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185425-185434/todo_backend/src/api/main.py", "pattern": "/^class TaskUpdate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185425-185434/todo_backend/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "completed", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185425-185434/todo_backend/src/api/main.py", "pattern": "/^    completed: Optional[bool] = Field(default=False, description=\"Completion status of the task /", "language": "Python", "typeref": "typename:Optional[bool]", "kind": "variable", "scope": "TaskCreate", "scopeKind": "class"}, {"_type": "tag", "name": "completed", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185425-185434/todo_backend/src/api/main.py", "pattern": "/^    completed: Optional[bool] = Field(default=None, description=\"Updated completion status\")$/", "language": "Python", "typeref": "typename:Optional[bool]", "kind": "variable", "scope": "TaskUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "completed", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185425-185434/todo_backend/src/api/main.py", "pattern": "/^    completed: bool = Field(..., description=\"Completion status of the task\")$/", "language": "Python", "typeref": "typename:bool", "kind": "variable", "scope": "Task", "scopeKind": "class"}, {"_type": "tag", "name": "create_task", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185425-185434/todo_backend/src/api/main.py", "pattern": "/^def create_task(payload: TaskCreate) -> Task:$/", "language": "Python", "typeref": "typename:Task", "kind": "function", "signature": "(payload: TaskCreate)"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185425-185434/todo_backend/src/api/main.py", "pattern": "/^    created_at: str = Field(..., description=\"ISO timestamp when the task was created\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Task", "scopeKind": "class"}, {"_type": "tag", "name": "delete_task", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185425-185434/todo_backend/src/api/main.py", "pattern": "/^def delete_task($/", "language": "Python", "kind": "function", "signature": "( task_id: int = Path(..., description=\"ID of the task to delete\"), )"}, {"_type": "tag", "name": "get_conn", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185425-185434/todo_backend/src/api/main.py", "pattern": "/^def get_conn():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185425-185434/todo_backend/src/api/main.py", "pattern": "/^def health_check():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185425-185434/todo_backend/src/api/main.py", "pattern": "/^    id: int = Field(..., description=\"Unique identifier for the task\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "Task", "scopeKind": "class"}, {"_type": "tag", "name": "init_db", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185425-185434/todo_backend/src/api/main.py", "pattern": "/^def init_db():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "list_tasks", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185425-185434/todo_backend/src/api/main.py", "pattern": "/^def list_tasks() -> List[Task]:$/", "language": "Python", "typeref": "typename:List[Task]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "on_startup", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185425-185434/todo_backend/src/api/main.py", "pattern": "/^def on_startup():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "row_to_task", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185425-185434/todo_backend/src/api/main.py", "pattern": "/^def row_to_task(row: sqlite3.Row) -> Task:$/", "language": "Python", "typeref": "typename:Task", "kind": "function", "signature": "(row: sqlite3.Row)"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185425-185434/todo_backend/src/api/main.py", "pattern": "/^    title: Optional[str] = Field(default=None, description=\"Updated title for the task\", min_len/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "TaskUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185425-185434/todo_backend/src/api/main.py", "pattern": "/^    title: str = Field(..., description=\"Title of the task\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Task", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185425-185434/todo_backend/src/api/main.py", "pattern": "/^    title: str = Field(..., description=\"Title of the task\", min_length=1, max_length=255)$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "TaskCreate", "scopeKind": "class"}, {"_type": "tag", "name": "toggle_task", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185425-185434/todo_backend/src/api/main.py", "pattern": "/^def toggle_task($/", "language": "Python", "typeref": "typename:Task", "kind": "function", "signature": "( task_id: int = Path(..., description=\"ID of the task to toggle\"), )"}, {"_type": "tag", "name": "update_task", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185425-185434/todo_backend/src/api/main.py", "pattern": "/^def update_task($/", "language": "Python", "typeref": "typename:Task", "kind": "function", "signature": "( payload: TaskUpdate, task_id: int = Path(..., description=\"ID of the task to update\"), )"}], "hash": "bbeccf7b37489cc6cfc28c9d289024f9", "format-version": 4, "code-base-name": "todo_backend", "filename": "todo_backend/src/api/main.py", "fields": [{"name": "DB_FILE = os.getenv(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[bool] completed", "scope": "TaskCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "bool completed", "scope": "Task", "scopeKind": "class", "description": "unavailable"}, {"name": "str created_at", "scope": "Task", "scopeKind": "class", "description": "unavailable"}, {"name": "int id", "scope": "Task", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] title", "scope": "TaskUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "str title", "scope": "Task", "scopeKind": "class", "description": "unavailable"}]}